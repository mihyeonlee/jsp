<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="member">
<!-- 회원1명정보 -->
	<select id="getMember" parameterType="String"
		resultType="MemberVO">
		SELECT *
		FROM users
		WHERE userid = #{userId}
	</select>
	
<!-- 전체회원정보 조회 -->
	<select id="selectAllMember" resultType="MemberVO">
		SELECT *
		FROM users
	</select>
	
<!-- 페이지처리 -->
	<select id="getPageMember" resultType="MemberVO"
		parameterType="PageVO">
		SELECT *
		FROM
		(SELECT ROWNUM rn, a.*
		FROM
		(SELECT *
		FROM users
		ORDER BY userid) a)
		WHERE rn BETWEEN (#{page}-1) * #{pageSize} +1 AND
		#{page} * #{pageSize}
	</select>
	
<!-- 전체회원 수 조회 -->
	<select id="getMemberTotalCnt" resultType="int">
		SELECT COUNT(*)
		FROM
		users
	</select>
	
<!-- 회원등록 -->
	<insert id="insertMember" parameterType="MemberVO">
		INSERT INTO users
		VALUES(#{userid},#{usernm},#{pass},sysdate,#{alias},#{addr1},#{addr2},
		#{zipcode},#{filename},#{realfilename})
	</insert>
	
<!-- 회원정보 삭제 -->
	<delete id="deleteMember">
		delete users
		where userid = #{userid}
	</delete>
	
<!-- 회원정보 수정 -->
	<update id="updateMember" parameterType="MemberVO">
		UPDATE users  
		<set>
			<if test="usernm != null">usernm=#{usernm},</if>
			<if test="pass != null">pass=#{pass},</if>
			<if test="filename != null">filename=#{filename},</if>
			<if test="realfilename != null">realfilename=#{realfilename},</if>
			alias = #{alias},
			addr1 = #{addr1},
			addr2 = #{addr2}
		</set>
		where userid=#{userid}
	</update>
</mapper>